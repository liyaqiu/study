路由器
	路由器特点
		路由器每个接口都是一个广播域
		路由器每个接口都是不同网段
	路由加表
		原则:保证下一跳地址能够通过路由表的某个出接口可达	
		目标网络地址一致+子网掩码一致【优先级越小就会进行加表】
			(Pre/Cost越小越优先)
			直连路由 Pre 0
			静态路由 Pre 60
			当 Pre 相同比较Cost值	
		目标网络地址一致+子网掩码不一致【都会进行加表】
			子网掩码越大(长)，优先级越高
			0.0.0.0/0 默认路由优先级最低，当都匹配不上才会匹配到默认路由						
	默认路由表
		网段路由(子网掩码8-30)
			127.0.0.0/8 - 127.0.0.0/30 常见的8-30  31掩码，那么地址不够没实际意义
				127.0.0.0/0 - 127.0.0.0/31 不可能出现，因为A类地掩码默认是8
		主机路由/精确路由(子网掩码32)
			127.0.0.1/32
			127.255.255.255/32
			255.255.255.255/32
		
	路由表的形成
		直连路由 根据本网段的物理接口信息生成的，无法进行非直连的通讯
			默认生成
				网段路由
					192.168.88.0/24
				主机路由
					192.168.88.1/32 
					192.168.88.255/32
	
		静态路由 
			系统视图下配置
				display ip routing-table 查看路由表
				ip route-static 0.0.0.0 0 12.1.1.2 配置静态路由
				undo ip route-static 0.0.0.0 0 12.1.1.2 取消静态路由配置

				R1
				ip route-static 192.168.89.0 24 12.1.1.2
				ip route-static 192.168.90.0 24 12.1.1.2
				R2
				ip route-static 192.168.88.0 24 12.1.1.1
				ip route-static 192.168.90.0 24 23.1.1.3
				R3
				ip route-static 192.168.88.0 24 23.1.1.2
				ip route-static 192.168.89.0 24 23.1.1.2
			浮动静态路由
				主从切换
					display ip interface brief 查看接口地址
					display current-configuration 查看当前设备的配置
					display ip routing-table 查看路由表
					电信路由器
						int LoopBack 10
							ip address 123.1.1.1 24
						int g0/0/0
							ip address 10.1.1.1 24
					移动路由器
						int LoopBack 10
							ip address 123.1.1.1 24
						int g0/0/0
							ip address 20.1.1.1 24
					我的路由器
						int g0/0/0
							ip address 10.1.1.2 24
						int g0/0/1
							ip address 20.1.1.2 24		
						
						shutdown以后可以实现主备切换
						ip route-static 123.1.1.0 24 10.1.1.1 preference 80
						ip route-static 123.1.1.0 24 20.1.1.1 preference 70	
				流量负载均衡
					display ip interface brief 查看接口地址
					display current-configuration 查看当前设备的配置
					display ip routing-table 查看路由表
					电信路由器
						int LoopBack 10
							ip address 123.1.1.1 24
						int g0/0/0
							ip address 10.1.1.1 24
					移动路由器
						int LoopBack 10
							ip address 123.1.1.1 24
						int g0/0/0
							ip address 20.1.1.1 24
					我的路由器
						int g0/0/0
							ip address 10.1.1.2 24
						int g0/0/1
							ip address 20.1.1.2 24		

						ip route-static 123.1.1.0 24 10.1.1.1 preference 70
						ip route-static 123.1.1.0 24 20.1.1.1 preference 70	
		动态路由 	
			AS自治系统(由1个或多个设备【路由器】组成的AS系统)
				公有AS
					电信，网通，移动，需要经过认证申请
				私有AS
					公司内网搭建的，或者家用，不需要经过验证申请
			通过在设备运行某种协议，并且通过这种协议自动交互路由信息
			IGP协议-内部网关路由协议 AS内:
				RIP协议是一种基于距离矢量算法的路由协议，存在着收敛慢，易产生路由环路，可扩展性差等问题，已经被OSPF取代
					距离矢量算法:
						特点:只知道路由的传递，但不知道路由具体的始发信息
						功能:查看是否能加表，可以加表则往下传递(传递给相邻设备)，不能加表则不传递
					缺点:
						逐跳收敛,收敛慢，先计算后泛洪，故障恢复时间长
						传闻路由更新机制.缺少对全局网络拓扑的了解
						最多有效跳数为15，环形组网中，使远端路由不可达
						以"跳数"为度量，存在选择次优路径风险
				OSPF协议(Open Shortest Path First 开放式最短路径优先)是IETF定义的一种基于【链路状态的内部网关路由协议】
					报文解释:
						Version：用于描述当前OSPF协议版本
						Massage Type:用于描述当前OSPF报文的类型
						Source OSPF Router:用于描述发送该Hello报文的路由器的Router ID
						Area ID:用于描述OSPF区域
					相对RIP的优点:
						以COST计算次优路径
						收敛快，先番泛洪后计算
						没有跳数限制
					链路状态算法:
						特点:每台路由器能独立的通过计算产生最短路径
						LSA:链路状态通告	
						LSDB:链路状态数据库
						功能:
							1.建立邻居/邻接关系--存放在邻居表	
							2.同步LSA，构建完LSDB--存放在LSDB数据库	
							3.SPF算法计算路由--存放在路由表
					几个重要的参数: ospf 10 router-id 1.1.1.1  area 0
						1.进程ID process-id 10
							一个设备可以有多个进程，尽量保持一个设备一个ospf进程即可
						2.路由器ID router-id 1.1.1.1 
							以后做作为LSA标记
							手动配置
								1.1.1.1
							自动生成
								根据全局的router-id生成
						3.区域号 area 0
							LSA同步前提条件,必须在相同区域中才能同步
							骨干区域:为0区域，ospf必须要有的区域，而且ospf规定第一个区域必须为0
							非骨干区域: 非0区域		
					5种报文类型	
						Hello报文:
							用于协商，维持建立OSPF零距
						DD(Database Description)报文:
							用于交互LSA的摘要信息
						LSR(Link State Request)报文:
							用于请求一条LSA
						LSU(Link State Update)报文:
							用于发送LSA的详细信息
						LSACK(Link State Acknowledgment)报文:
							用于对接受到的LSA进行确认
					7种状态	
						Down状态
							Hello报文
						Init状态 
							Hello报文
								收到对方的Hello报文,header(source ospf router:1.1.1.1)
						2-way状态
							Hello报文
								收到对方的Hello报文，里面活跃邻居字段(active neighbor:2.2.2.2)		
						-------------------建立邻居关系------------------						
						DR和BDR建立 DR(Designated Router) BDR(Backup Designated Router) DRO(Designated Router Other)
							作用
								是为了优化同一广播域多台设备之间【交叉】交互
								路由器广播域:为单口
								交换机广播域:全部口(不划分Vlan)
							关系建立
								DR和BDR----邻接关系
								DR和DRO----邻接关系
								BDR和DRO---邻接关系
								DRO和DRO---邻居关系
							选举过程
								利用Hello报文选举
								冷启动(40秒选举时间)
									先选举出BDR，如果同一个广播域里面没有DR，则由BDR升级位DR
										Router Priority: 1 (1-255)默认为1，0为不参与DR，BDR选举
										如果Priority相同，则根据Router id选，Router id最大则为DR
								热启动
									就算优先级在大也无法成为DR，只能重启OSPF服务
						Exstart状态
							DD(Database Description)报文(单播)
								主从选举(Router id大为主)
						Exchange状态
							DD(Database Description)报文(单播)
								同步摘要信息
						Loading状态
							LSR(Link State Request)报文(单播)
								缺少LSR摘要信息求情
							LSU(Link State Update)报文
								缺少的LSR详细信息回复
							LSACK(Link State Acknowledgment)报文
								缺少的LSR摘要信息确认
						Full状态 
						-------------------建立邻接关系------------------		
					命令:
						协议视图
							display ip routing-table 查看路由表
							R1
								ospf 10 router-id 1.1.1.1 创建进程，或者进入
									area 0 创建区域，或者进入
										区域下宣告(开始整个ospf的过程)
											network 12.1.1.0 0.0.0.255 宣告接口地址以及反掩码(255.255.255.255-255.255.255.0)
											network 192.168.77.0 0.0.0.255 
											network 0.0.0.0 0.0.0.0 宣告全部，可以实现自动宣告功能
										接口下宣告(开始整个ospf的过程)
											int g0/0/1
											ospf enable 10 area 0 宣告
											undo ospf enable 10 area 0 取消宣告
											display this 查看宣告信息
							R2
								ospf 10 router-id 2.2.2.2
									area 0 
										network 12.1.1.0 0.0.0.255 
										network 23.1.1.0 0.0.0.255 
										network 192.168.88.0 0.0.0.255
																					
							R3
								ospf 10 router-id 3.3.3.3
									area 0
										network 23.1.1.0 0.0.0.255 
										network 192.168.99.0 0.0.0.255
							状态信息查看
								display ospf peer 显示邻居节点信息，以及ospf进程号
								display ospf peer brief 显示邻居节点信息，以及ospf进程号
								display ospf interface	查看所有接口					
								display ospf interface g0/0/0 查看某个接口
							修改或者删除
								undo ospf 10 删除ospf
								ospf 10 router-id 1.1.1.2 覆盖router-id，但是重启ospf进程
								int g0/0/0
									ospf dr-priority 233  修改ospf接口优先级
								用户视图	
									reset ospf proces 重启ospf进程				
				IS-IS协议
			EGP协议-外部网关路由协议 AS间:
				BGP协议